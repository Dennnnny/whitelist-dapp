{"componentChunkName":"component---src-pages-markdown-remark-frontmatter-path-tsx","path":"/blog/from-hexo-to-gatsby-2/","result":{"data":{"markdownRemark":{"html":"<h1>é—œæ–¼é–‹ç™¼ Gatsby</h1>\n<p>é€™éƒ¨åˆ†çš„è©± å°±è·Ÿå¤§å¤šæ•¸çš„ react å°ˆæ¡ˆå·®ä¸å¤šäº†ï½</p>\n<p>æˆ‘é€™é‚Šé–‹ç™¼ åŸºæœ¬ä¸Šéƒ½æ˜¯ç…§è‘—å®˜ç¶²å»ºè­° æˆ–è€…æ˜¯çœ‹èµ·ä¾†æ¯”è¼ƒå¤šäººç”¨çš„ plugin åœ¨åš</p>\n<pre class=\"grvsc-container abyss\" data-language=\"\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">åŸºæœ¬ä¸Šå°ˆæ¡ˆæ¶æ§‹æœƒæ˜¯é€™æ¨£çš„</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">my-gatsby-site (root folder)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">â”œâ”€ src</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">â”‚ â”œâ”€ images</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">â”‚ â”‚ â””â”€ icon.png</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">â”‚ â””â”€ pages</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">â”‚   â”œâ”€ 404.js</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">â”‚   â””â”€ index.js</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">â”œâ”€ README.md</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">â”œâ”€ gatsby-config.js</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">â”œâ”€ package-lock.json</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">â””â”€ package.json</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">src è³‡æ–™å¤¾é€šå¸¸æœƒæ”¾å…ƒä»¶/é é¢... ç­‰è³‡æ–™</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">gatsby-config æ˜¯èª¿æ•´pluginsæœƒç”¨åˆ°çš„è¨­ç½®æª”</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">ç„¶å¾Œé‚„æœ‰ä¸€äº›æª”æ¡ˆæ˜¯éœ€è¦è‡ªå·±çœ‹éœ€æ±‚èª¿æ•´æ–°å¢çš„ï¼š</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">gatsby-browser å¯ä»¥åšä¸€å€‹container layout</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">layouts/index.js æˆ‘æ–°å¢ä¸€å€‹layoutsçš„è³‡æ–™å¤¾ä¾†æ”¾ä¸€äº›æ¨£å¼çš„æª”æ¡ˆ</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  ex: reset.css &amp; theme</span></span></code></pre>\n<h2>gatsby /pages</h2>\n<p>åœ¨ /pages è³‡æ–™ä¸­<br>\næª”æ¡ˆåç¨±å°±ä»£è¡¨äº†ç¶²å€è·¯å¾‘<br>\nä¾‹å¦‚ index.js å°±æ˜¯ é¦–é <br>\nabout.js å°±æ˜¯å°æ‡‰åˆ° ç¶²å€/about é€™ä¸€é <br>\næ‰€ä»¥å¯ä»¥ç›´æ¥è—‰ç”±å»ºç«‹æ–°çš„æª”æ¡ˆ ä¾†å»ºç«‹æ–°çš„ç¶²å€é é¢<br>\néå¸¸æ–¹ä¾¿</p>\n<p>gatsby æœƒåœ¨ç”¢ç”Ÿé é¢çš„æ™‚å€™<br>\næ‰¾åˆ°ç›¸å°æ‡‰çš„æª”æ¡ˆ å»ºç«‹èµ·ä¾†<br>\nå¦‚æœæ²’æœ‰æ‰¾åˆ°çš„è©± å°±æœƒå¼•å°åˆ° 404.js é€™å€‹é é¢å»</p>\n<h3>gatsby å‹•æ…‹è·¯å¾‘</h3>\n<p>é¦–å…ˆå…ˆä¸Š<a href=\"https://www.gatsbyjs.com/docs/how-to/routing/adding-markdown-pages/\">å®˜ç¶²</a><br>\nè£¡é¢æœ‰è©³ç´°çš„èªªæ˜ è®šè®š</p>\n<p>é€™æ¬¡è¦åšçš„æ˜¯æŠŠ md æ ¼å¼çš„æ–‡ç« è½‰åŒ–æˆç¶²é çš„é é¢<br>\næ‰€ä»¥æœƒéœ€è¦ä¸€å€‹å‹•æ…‹è·¯å¾‘<br>\næ¯”å¦‚èªª ï¼š md æ–‡ç« æœ‰å€‹ id å« abc123<br>\nè®“ä»–å°æ‡‰ä¸€å€‹ /path/abc123 çš„ç¶²å€</p>\n<p>è¦å»ºç«‹å‹•æ…‹çš„è·¯å¾‘ é¦–å…ˆè¦æœ‰ä¸€å€‹èƒ½å¤ å‹•æ…‹ç”¢ç¶²å€çš„æª”æ¡ˆ<br>\né€™éƒ¨åˆ† ä¸è«–æ˜¯ gatsby æˆ– next.js çš„åšæ³•å¤§åŒå°ç•°<br>\nåœ¨å»ºç«‹æª”æ¡ˆçš„æ™‚å€™ ç”¨å¤§æ‹¬è™ŸåŒ…èµ·ä¾†<br>\n=> {MarkdownRemark.frontmatter__path}.js<br>\né€™æ¨£å°±èƒ½åƒåˆ°å‹•æ…‹è·¯å¾‘äº†ï½\né€™å€‹ MarkDownRemark æ˜¯ä¸€å€‹ plugin çš„ç”¨æ³•<br>\nç‚ºäº†åƒåˆ° md æ ¼å¼ å¿…é ˆå…ˆè£é€™å€‹å¥—ä»¶\n<code>npm i --save gatsby-transformer-remark</code></p>\n<p>å¯ä»¥åƒè€ƒ<a href=\"https://www.gatsbyjs.com/plugins/gatsby-transformer-remark/\">é€™è£¡</a> è©³ç´°çš„èªªæ˜</p>\n<p>ç„¶å¾Œéœ€è¦èª¿æ•´ä¸€ä¸‹ gatsby-config çš„è¨­ç½®</p>\n<pre class=\"grvsc-container abyss\" data-language=\"js\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15 mtki\">module</span><span class=\"mtk1\">.</span><span class=\"mtk15 mtki\">exports</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  siteMetadata: </span><span class=\"mtk7\">...</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  plugins: [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">...</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      resolve: </span><span class=\"mtk11\">`gatsby-source-filesystem`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      options: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        name: </span><span class=\"mtk11\">`md_blog_posts`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        path: </span><span class=\"mtk11\">`${</span><span class=\"mtk1\">__dirname</span><span class=\"mtk11\">}/src/md_blog_posts`</span><span class=\"mtk1\">, </span><span class=\"mtk3\">// é€™è£¡æ˜¯ä½ å­˜æ”¾mdçš„è³‡æ–™å¤¾åç¨±</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  ],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span></code></pre>\n<p>ç„¶å¾Œå› ç‚º gatsby å…§å»ºç”¨ graphQL<br>\næ‰€ä»¥åœ¨é€™é ä¸‹é¢ç”¨ graphQL çš„æ–¹å¼ ä¾†å–è³‡æ–™<br>\nä¸éåˆ¥æ“”å¿ƒ<br>\nå®˜ç¶²è£¡é¢å·²ç¶“æœ‰ç¤ºç¯„å¤§æ¦‚æ€éº¼å¯«äº†<br>\nç…§è‘—åšæ²’å•é¡Œçš„<br>\nä½ ä¹Ÿå¯ä»¥é€² localhost:8000/___graphql è£¡é¢å»ç·´ç¿’æ‰“è³‡æ–™</p>\n<p>ä¸‹é¢æ˜¯æˆ‘çš„é é¢ä½œæ³•ï¼š<br>\næˆ‘çš„å‹•æ…‹è·¯å¾‘æ˜¯ç›´æ¥æ”¾åœ¨/pages åº•ä¸‹çš„<br>\næ‰€ä»¥è¦åœ¨è£¡é¢åˆ¤æ–·æ˜¯å“ªç¨®é¡å‹çš„ md æ–‡ç« </p>\n<p>ç•¶ç„¶å¦å¤–çš„æ–¹æ³•æ˜¯ åœ¨ pages/åº•ä¸‹ å…ˆæ–°å¢ä¸€å€‹è³‡æ–™å¤¾\nä¾‹å¦‚ï¼š blog/\nåº•ä¸‹æ”¾ index.js èˆ‡ {å‹•æ…‹çš„ md_path}.js<br>\né€™æ¨£ä¸€ä¾† èµ°åˆ°/blog é€™é æœƒå…ˆå‡ºç¾ index.js<br>\nç„¶å¾Œ /blog/post1 å°±æœƒæ˜¯ post.md é€™æ¨£äº†</p>\n<p>ä»¥ä¸Šæ˜¯ä»Šå¤©åˆ†äº«çš„å…§å®¹ï½\næ¥ä¸‹ä¾†æˆ‘æœƒåˆ†äº«æ¯”è¼ƒè·Ÿ gatsby æ²’æœ‰ç›´æ¥é—œè¯çš„ä¸»é¡Œ<br>\nä½†å› ç‚ºä¹Ÿæ˜¯é€™å€‹å°ˆæ¡ˆçš„ æ‰€ä»¥å°±ä¸€èµ·åˆ†äº«ï¼¸ï¼¤<br>\nä¸€ç¯‡æœƒæ˜¯ styled-components<br>\nä¸€ç¯‡æ˜¯ spread-sheet çš„ app-script<br>\nå¦ä¸€ç¯‡æ˜¯æ¯”è¼ƒæœ‰é—œçš„ ç•™è¨€åŠŸèƒ½\nå¸Œæœ›æˆ‘å¯ä»¥å¥½å¥½çš„ç”¢å‡º ï¼¸ï¼¤ ğŸ‘‹</p>\n<pre class=\"grvsc-container abyss\" data-language=\"js\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">import</span><span class=\"mtk1\"> React </span><span class=\"mtk7\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;react&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">import</span><span class=\"mtk1\"> { graphql } </span><span class=\"mtk7\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;gatsby&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">import</span><span class=\"mtk1\"> BlogPost </span><span class=\"mtk7\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;@components/page/BlogPost&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">import</span><span class=\"mtk1\"> ProjectPost </span><span class=\"mtk7\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;@components/page/ProjectPost&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">export</span><span class=\"mtk1\"> </span><span class=\"mtk7\">default</span><span class=\"mtk1\"> </span><span class=\"mtk15 mtki\">function</span><span class=\"mtk1\"> </span><span class=\"mtk6\">Template</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk19 mtki\">data</span><span class=\"mtk1\">, </span><span class=\"mtk3\">// this prop will be injected by the GraphQL query below.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15 mtki\">const</span><span class=\"mtk1\"> { markdownRemark } </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> data; </span><span class=\"mtk3\">// data.markdownRemark holds your post data</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15 mtki\">const</span><span class=\"mtk1\"> { frontmatter, html } </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> markdownRemark;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15 mtki\">const</span><span class=\"mtk1\"> { type } </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> frontmatter;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15 mtki\">const</span><span class=\"mtk1\"> renderPost </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    blog: &lt;</span><span class=\"mtk15 mtki\">BlogPost</span><span class=\"mtk1\"> </span><span class=\"mtk6\">data</span><span class=\"mtk7\">=</span><span class=\"mtk1\">{{ </span><span class=\"mtk7\">...</span><span class=\"mtk1\">frontmatter, html }} /&gt;,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    project: &lt;</span><span class=\"mtk15 mtki\">ProjectPost</span><span class=\"mtk1\"> </span><span class=\"mtk6\">data</span><span class=\"mtk7\">=</span><span class=\"mtk1\">{{ </span><span class=\"mtk7\">...</span><span class=\"mtk1\">frontmatter, html }} /&gt;,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  };</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">return</span><span class=\"mtk1\"> renderPost[type];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15 mtki\">const</span><span class=\"mtk1\"> pageQuery </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">graphql</span><span class=\"mtk11\">`</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">  query ($id: String!) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">    markdownRemark(id: { eq: $id }) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">      html</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">      frontmatter {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">        date(formatString: &quot;MMMM DD, YYYY&quot;)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">        path</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">        title</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">        type</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">        image_cover</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">`</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .abyss { background-color: #000c18; }\n  .abyss .mtki { font-style: italic; }\n  .abyss .mtk15 { color: #9966B8; }\n  .abyss .mtk1 { color: #6688CC; }\n  .abyss .mtk7 { color: #225588; }\n  .abyss .mtk11 { color: #22AA44; }\n  .abyss .mtk3 { color: #384887; }\n  .abyss .mtk6 { color: #DDBB88; }\n  .abyss .mtk19 { color: #2277FF; }\n  .abyss .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","frontmatter":{"date":"September 13, 2022","path":"/blog/from-hexo-to-gatsby-2","title":"Gatsbyç”¨èµ·ä¾†_é–‹ç™¼ä¸­","type":"blog","image_cover":"https://images.unsplash.com/photo-1542903660-eedba2cda473?fit=crop&w=1000&q=80"}}},"pageContext":{"id":"9d53f1fc-e643-5a66-8401-5baed3a41ab8","frontmatter__path":"/blog/from-hexo-to-gatsby-2","__params":{"frontmatter__path":"blog"}}},"staticQueryHashes":["3764592887"]}